@import "tailwindcss";

@theme {
    /* BASE = LIGHT */
    --color-page-bg: #ffffff;
    --color-page-text: #0f172a;
    --color-neon-green: #00ff9c;
    --color-neon-cyan: #22d3ee;
    --color-neon-fuchsia: #d946ef;

    --font-heading: "Montserrat", sans-serif;
    --font-mono: "JetBrains Mono", monospace;
}

@variant dark (&:where(.dark, .dark *));

.dark {
    --color-page-bg: #0f172a; /* Deep slate */
    --color-page-text: #f8fafc; /* Off white */
}

/* 1. THE PULSE ANIMATION */
@keyframes neon-pulse {
  0%, 100% {
    filter: drop-shadow(0 0 2px var(--glow-color)) brightness(1);
    opacity: 1;
  }
  50% {
    filter: drop-shadow(0 0 15px var(--glow-color)) brightness(1.2);
    opacity: 0.9;
  }
}

@layer base {
  html, body {
    /* Only transition colors, not layout things like width or height */
    @apply transition-colors duration-300 ease-in-out;
  }
  
  /* You can also target specific elements if you want them to fade too */
  a, button, div {
     @apply transition-colors duration-300 ease-in-out;
  }
}

@layer components {
  .folder-container {
  --glow-color: var(--color-neon-cyan); /* add this */
  opacity: 0.25;
  animation: none;
  filter: none;
  transition: opacity 400ms ease, filter 400ms ease;
  }

  /* OFF state: kill neon glow on inner parts */
  .folder-container:not(.is-active) .folder-body {
    box-shadow: none;
  }

  .folder-container:not(.is-active) .folder-tab {
    text-shadow: none;
  }

  /* Optional: dim borders when off */
  .folder-container:not(.is-active) .folder-body,
  .folder-container:not(.is-active) .folder-tab {
    border-color: color-mix(in srgb, var(--glow-color), transparent 70%);
  }


  .dark .folder-container {
    --glow-color: var(--color-neon-fuchsia);
  }


  /* active: glow turns on */
  .folder-container.is-active {
    /* on when in view */
    opacity: 1;
    animation: neon-pulse 4s infinite ease-in-out;
    filter: drop-shadow(0 0 6px var(--glow-color));
  }

  .folder-tab {
    /* 1. Changed -top-[4px] to top-[2px] to sink it into the 6px border */
    /* 2. Increased rounding slightly to match the body better */
    @apply absolute top-[7px] left-10 -translate-y-full translate-x-[23px] md:left-16 px-10 py-3 -skew-x-12 z-20;
    @apply border-[6px] rounded-t-[2.5rem] bg-page-bg;
    
    /* Neon Colors + Bottom border matching bg to hide the seam */
    @apply border-[var(--glow-color)] border-b-page-bg;
    
    text-shadow: 0 0 10px var(--glow-color);
  }

  .folder-body {
    /* Rounding ALL corners [2.5rem], 6px thick */
    @apply relative p-10 md:p-14 -skew-x-12 border-[6px] bg-page-bg rounded-[2.5rem] transition-all duration-300 z-10;
    @apply border-[var(--glow-color)];
    
    /* Dynamic Shadow using the variable */
    box-shadow: 0 0 20px color-mix(in srgb, var(--glow-color), transparent 50%),
                0 0 40px color-mix(in srgb, var(--glow-color), transparent 80%);
  }

  .folder-content {
    @apply skew-x-12;
  }

  /* Apply glow to headings inside folders automatically */
  .folder-content h2 {
    @apply font-heading;
    text-shadow: 0 0 15px var(--glow-color);
  }
}

/* 2. FIXING THE GENERAL GLOW UTILITY */
@layer utilities { 
  .glow {
    text-shadow: 0 0 8px currentColor,
                 0 0 20px color-mix(in srgb, currentColor, transparent 30%);
  }
}

/* Neon Flicker Animation */
@keyframes neon-flicker {
  0%, 18%, 22%, 25%, 53%, 57%, 100% {
    opacity: 1;
  }
  20%, 24%, 55% {
    opacity: 0.3;
    filter: brightness(0.5);
  }
}

.animate-flicker {
  animation: neon-pulse 4s infinite ease-in-out, neon-flicker 1.5s ease-out infinite;
}

